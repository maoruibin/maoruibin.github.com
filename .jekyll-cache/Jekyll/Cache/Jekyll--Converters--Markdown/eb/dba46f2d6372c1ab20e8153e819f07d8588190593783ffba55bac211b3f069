I"¸/<p><img src="http://upload-images.jianshu.io/upload_images/588640-f3c7beeead2d22c8.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Photo by Patrick Tomasso on Unsplash" /></p>

<p>Drawable æ˜¯å¼€å‘ä¸­ç»å¸¸ç”¨åˆ°çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬ç»å¸¸ç”¨å®ƒå»è®¾ç½® View çš„èƒŒæ™¯ï¼ŒèƒŒæ™¯å¯ä»¥ä¸€ä¸ªé¢œè‰²å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€å¼ èµ„æºå›¾ç‰‡ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ Drawableç­‰ç­‰ã€‚è¿™ç¯‡æ–‡ç« å°±ç®€å•è¯´ä¸‹ Drawable ä¸ View çš„å…³ç³»ï¼ŒåŒæ—¶ç»“åˆä»£ç ï¼Œç®€è¦åˆ†æä¸€ä¸‹ Drawable å¦‚ä½•ä½œç”¨äº Viewã€‚</p>

<h2 id="drawable-ä»‹ç»">Drawable ä»‹ç»</h2>

<p>å®˜æ–¹ä»‹ç»</p>

<blockquote>
  <p>A Drawable is a general abstraction for â€œsomething that can be drawn.â€ Most often you will deal with Drawable as the type of resource retrieved for drawing things to the screen; the Drawable class provides a generic API for dealing with an underlying visual resource that may take a variety of forms. Unlike a <code class="language-plaintext highlighter-rouge">View</code>, a Drawable does not have any facility to receive events or otherwise interact with the user.</p>
</blockquote>

<p>ç®€å•ç¿»è¯‘ä¸‹ï¼š</p>

<blockquote>
  <p>Drawable æ˜¯ â€œæ‰€æœ‰å¯ç»˜åˆ¶ä¸œè¥¿â€ çš„ä¸€ä¸ªæŠ½è±¡ï¼Œå¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå„ç§ä¸åŒç±»å‹çš„èµ„æºä½œä¸ºè½¬åŒ–ä¸º drawableï¼Œç„¶å View ä¼šå¸®æˆ‘ä»¬æŠŠå®ƒæ¸²æŸ“åˆ°å±å¹•ä¸Šã€‚Drawable ç±»æä¾›äº†ä¸€ä¸ªé€šç”¨ APIï¼Œç”¨äºè§£æè½¬åŒ–å„ç§å¯è§†èµ„æºåˆ° Canvasï¼Œè·Ÿ View ä¸ä¸€æ ·ï¼Œ<strong>Drawable ä¸èƒ½æ¥å—ä»»ä½•äº‹ä»¶ä»¥åŠç”¨æˆ·äº¤äº’</strong>ã€‚</p>
</blockquote>

<p>æ€»è€Œè¨€ä¹‹ï¼ŒDrawable å°±æ˜¯ä¸€ä¸ªå¯ç»˜åˆ¶ä¸œè¥¿çš„æŠ½è±¡ï¼Œç›¸æ¯” Viewï¼Œå®ƒæ›´çº¯ç²¹ï¼Œå°±æ˜¯ç”¨æ¥åšç»˜åˆ¶ç›¸å…³äº‹æƒ…çš„ï¼Œå®ƒå¤„ç†ä¸äº†ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼Œä¹Ÿä¸éœ€è¦å¤„ç†ï¼Œæ‰€æœ‰äº¤äº’ç›¸å…³çš„äº‹éƒ½æ˜¯ç”± View æ¥å®Œæˆï¼Œä½†æ˜¯èƒŒæ™¯ç›¸å…³çš„äº‹å¤§éƒ½å¯ä»¥é€šè¿‡ Drawable æ¥å®Œæˆã€‚</p>

<p>ä¸€èˆ¬çš„ï¼Œæˆ‘ä»¬è¦ä¸º View è®¾ç½®èƒŒæ™¯ï¼Œå¯é€šè¿‡å¦‚ä¸‹å‡ ç§æ–¹å¼ï¼š</p>

<ul>
  <li>é€šè¿‡é¢œè‰²ä¸º View è®¾ç½®èƒŒæ™¯</li>
  <li>é€šè¿‡è‡ªå®šä¹‰çš„ shape è®¾ç½®èƒŒæ™¯</li>
</ul>

<h3 id="ç”¨é¢œè‰²è®¾ç½®èƒŒæ™¯">ç”¨é¢œè‰²è®¾ç½®èƒŒæ™¯</h3>
<p>é€šè¿‡ View çš„ setBackgroundColor æ–¹æ³•å¯ä»¥è®¾ç½®é¢œè‰²ä¸º View çš„èƒŒæ™¯ã€‚</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">button</span><span class="o">.</span><span class="na">setBackgroundColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">YELLOW</span><span class="o">);</span>
</code></pre></div></div>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>

<p><img src="http://upload-images.jianshu.io/upload_images/588640-10df2a93e49cce80.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image" /></p>

<h3 id="ç”¨è‡ªå®šä¹‰çš„-shape-è®¾ç½®èƒŒæ™¯">ç”¨è‡ªå®šä¹‰çš„ shape è®¾ç½®èƒŒæ™¯</h3>

<p>å…ˆç”¨ xml è‡ªå®šä¹‰ä¸€ä¸ªåœ†è§’ç©ºå¿ƒæè¾¹çŸ©å½¢ shape</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;shape</span>
     <span class="na">android:shape=</span><span class="s">"rectangle"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;corners</span> <span class="na">android:radius=</span><span class="s">"4dp"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;solid</span> <span class="na">android:color=</span><span class="s">"#fff"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;stroke</span> <span class="na">android:color=</span><span class="s">"#ef6f06"</span> <span class="na">android:width=</span><span class="s">"1dp"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/shape&gt;</span>
</code></pre></div></div>
<p>é€šè¿‡ä»£ç è¿›è¡Œè®¾ç½®</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">button</span><span class="o">.</span><span class="na">setBackgroundResource</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">bk_normal</span><span class="o">);</span>
</code></pre></div></div>

<p>æ•ˆæœå¦‚ä¸‹ï¼š
<img src="http://upload-images.jianshu.io/upload_images/588640-3d920cfacd70e1aa.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image" /></p>

<p>å¯ä»¥çœ‹åˆ°ï¼Œç»™ View è®¾ç½®èƒŒæ™¯ drawable éå¸¸ç®€å•ï¼Œå…·ä½“é€šè¿‡å¦‚ä¸‹çš„ API å®ç°èƒŒæ™¯è®¾ç½®ï¼š</p>

<ul>
  <li>setBackgroundColor(@ColorInt int color)</li>
  <li>setBackgroundResource(@DrawableRes int resid)</li>
  <li>setBackground(Drawable background)</li>
</ul>

<p><strong>ä½†æ˜¯è®¾ç½®çš„èƒŒæ™¯ Drawable æ˜¯å¦‚ä½•åœ¨ View ä¸Šç”Ÿæ•ˆçš„</strong>ï¼Œå¯èƒ½å¾ˆå¤šäººæ²¡å»æ€è€ƒè¿‡è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œç®€å•åˆ†æä¸‹ã€‚</p>

<h2 id="drawable-å¦‚ä½•ä½œç”¨äº-view">Drawable å¦‚ä½•ä½œç”¨äº View</h2>

<p>Drawable æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè¿™é‡Œé€šè¿‡å®ƒçš„çš„å‡ ä¸ªæŠ½è±¡æ–¹æ³•å°±èƒ½å¤§æ¦‚çŒœå¾—å‡º Drawable å¦‚ä½•ä½œç”¨äº Viewï¼Œä¸‹é¢æ˜¯ Drawable çš„å‡ ä¸ªæŠ½è±¡æ–¹æ³•ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">draw</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">Canvas</span> <span class="n">canvas</span><span class="o">);</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">setAlpha</span><span class="o">(</span><span class="nd">@IntRange</span><span class="o">(</span><span class="n">from</span><span class="o">=</span><span class="mi">0</span><span class="o">,</span><span class="n">to</span><span class="o">=</span><span class="mi">255</span><span class="o">)</span> <span class="kt">int</span> <span class="n">alpha</span><span class="o">);</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">setColorFilter</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="nc">ColorFilter</span> <span class="n">colorFilter</span><span class="o">);</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="nd">@PixelFormat</span><span class="o">.</span><span class="na">Opacity</span> <span class="kt">int</span> <span class="nf">getOpacity</span><span class="o">();</span>
</code></pre></div></div>

<p>å¯ä»¥çœ‹åˆ°è¿™é‡Œæœ‰ä¸€ä¸ª draw æ–¹æ³•ï¼Œå¹¶ä¸”å‚æ•°ä¸­æä¾›äº† canvas å¯¹è±¡ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">draw</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">Canvas</span> <span class="n">canvas</span><span class="o">);</span>
</code></pre></div></div>

<p>ç°åœ¨å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œ<strong>View é€šè¿‡ setBackground æ–¹æ³•ä¸ºè‡ªå·±è®¾ç½®äº†ä¸€ä¸ª drawable å¯¹è±¡åï¼Œè€Œ drawable åˆæœ‰ä¸€ä¸ª draw æ–¹æ³•ï¼Œé‚£ä¹ˆ View ç»˜åˆ¶è‡ªå·±çš„èƒŒæ™¯æ—¶ï¼Œç›´æ¥è°ƒç”¨ drawable å¯¹è±¡çš„çš„ draw æ–¹æ³•ï¼Œè¿™ä¸ª draw æ–¹æ³•éœ€è¦ä¸€ä¸ª canvas å¯¹è±¡ï¼Œè¿™é‡Œå¯ç›´æ¥æŠŠ View çš„ Canvas å¯¹è±¡ä¼ é€’è¿‡å»ï¼Œé‚£ä¹ˆ Drawable å°±å¯ä»¥æˆåŠŸçš„æŠŠè‡ªå·±çš„ç»˜åˆ¶å†…å®¹åº”ç”¨åˆ° View ä¹‹ä¸Šã€‚</strong></p>

<p>è¿™ä¸ªè¿‡ç¨‹ï¼Œç›¸å½“äº View æŠŠè‡ªå·±çš„èƒŒæ™¯ç»˜åˆ¶åŠŸèƒ½å¤–åŒ…ç»™äº† Drawable å¯¹è±¡ã€‚</p>

<p>è€Œä¸”ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§éå¸¸å¥½çš„è®¾è®¡æ¨¡å¼ï¼Œ<strong>View è´Ÿè´£æµ‹é‡è‡ªå·±å¤§å°ï¼Œç»™è‡ªå·±æŒ‡å®šä½ç½®ï¼Œå¹¶ç»˜åˆ¶ View å‰æ™¯ ï¼Œä½†æ˜¯æŠŠè‡ªå·±çš„èƒŒæ™¯ç»˜åˆ¶å¤–æ´¾ç»™äº†æ›´ç‹¬ç«‹çš„ drawable å»åšï¼Œä»è€Œåšåˆ°äº†è®©è‡ªå·±æ›´åŠ è½»é‡ï¼Œç°åœ¨ View å°±æˆåŠŸçš„æŠŠèƒŒæ™¯ç»˜åˆ¶èŒè´£åˆ†é…ç»™äº†è‡ªå·±çš„ drawable å¯¹è±¡ã€‚</strong></p>

<p>å°½ç®¡ä¸Šé¢åªæ˜¯æƒ³è±¡ï¼Œä½†äº‹å®ä¸Šä¹Ÿç¡®å®å¦‚æ­¤ã€‚é€šè¿‡æŸ¥çœ‹æºç ï¼Œåœ¨ View ä¸­æœ‰ä¸€ä¸ªç§æœ‰æ–¹æ³• <code class="language-plaintext highlighter-rouge">drawBackground</code>ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æŠŠ drawable ç»˜åˆ¶åœ¨ canvas ä¸Šã€‚</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Draws the background onto the specified canvas.
 * @param canvas Canvas on which to draw the background
 */</span>
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">drawBackground</span><span class="o">(</span><span class="nc">Canvas</span> <span class="n">canvas</span><span class="o">)</span> <span class="o">{</span>
	<span class="kd">final</span> <span class="nc">Drawable</span> <span class="n">background</span> <span class="o">=</span> <span class="n">mBackground</span><span class="o">;</span>
	<span class="k">if</span> <span class="o">(</span><span class="n">background</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="n">setBackgroundBounds</span><span class="o">();</span>
    <span class="c1">//çœç•¥éƒ¨åˆ†ä»£ç </span>
	<span class="kd">final</span> <span class="kt">int</span> <span class="n">scrollX</span> <span class="o">=</span> <span class="n">mScrollX</span><span class="o">;</span>
	<span class="kd">final</span> <span class="kt">int</span> <span class="n">scrollY</span> <span class="o">=</span> <span class="n">mScrollY</span><span class="o">;</span>
	<span class="k">if</span> <span class="o">((</span><span class="n">scrollX</span> <span class="o">|</span> <span class="n">scrollY</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//è°ƒç”¨ drawable è‡ªå·±çš„ draw æ–¹æ³•ï¼Œä»è€Œå°†ç»˜åˆ¶çš„åŠŸèƒ½ç§»äº¤åˆ° drawable ç±»</span>
		<span class="n">background</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="n">canvas</span><span class="o">);</span>
	<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
		<span class="n">canvas</span><span class="o">.</span><span class="na">translate</span><span class="o">(</span><span class="n">scrollX</span><span class="o">,</span> <span class="n">scrollY</span><span class="o">);</span>
		<span class="n">background</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="n">canvas</span><span class="o">);</span>
		<span class="n">canvas</span><span class="o">.</span><span class="na">translate</span><span class="o">(-</span><span class="n">scrollX</span><span class="o">,</span> <span class="o">-</span><span class="n">scrollY</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="drawable-ä¸-view-çš„å…³ç³»">Drawable ä¸ View çš„å…³ç³»</h3>

<ul>
  <li>View æ˜¯çš®ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…·ä½“çš„ä¸œè¥¿ï¼Œçœ‹å¾—è§æ‘¸å¾—ç€ï¼Œå› ä¸ºå®ƒè‡ªå·±å¯ä»¥æµ‹é‡è‡ªå·±æ‰“æ¶ˆã€æŒ‡å®šè‡ªå·±ä½ç½®ï¼Œè¿˜èƒ½æ¥å— onTouch äº‹ä»¶ä»è€Œå¤„ç†ç”¨æˆ·äº¤äº’ã€‚</li>
  <li>Drawable æ˜¯æ¯›ï¼Œå®ƒå¯ä»¥ä¸å­˜åœ¨ï¼Œå› ä¸º View å®Œå…¨å¯ä»¥åœ¨è‡ªå·±çš„ onDraw æ—¶æœºä¸­ï¼Œè‡ªå·±æŠŠè‡ªå·±ç»˜åˆ¶äº†ï¼Œæ— éœ€æŠŠç»˜åˆ¶è¿›è¡Œå¤–åŒ…ã€‚</li>
  <li>ä½†æ˜¯ Drawable æ›´ä¸“ä¸šï¼Œæ›´ç‹¬ç«‹ï¼Œå®ƒæä¾›äº†ä¸€æ•´å¥—ä¸°å¯Œçš„èƒŒæ™¯ Drawable æœºåˆ¶ï¼Œå®ƒæœ‰ä¸°å¯Œçš„å®ç°ç±»ï¼Œå¯ä»¥æä¾›ç»™ View è¿›è¡Œæ–¹ä¾¿çš„èƒŒæ™¯è®¾ç½®ï¼Œå¯¹ View æ¥è¯´ drawable æä¾›çš„é‚£äº›å®ç°ç±»å¼€ç®±å³ç”¨ï¼Œè¿˜å¯ä»¥å‡å°‘è‡ªå·±çš„èŒèƒ½ï¼ŒèŠ‚çœè‡ªå·±çš„ç»´æŠ¤å¼€é”€ï¼Œä½•ä¹è€Œä¸ä¸ºã€‚</li>
</ul>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>Drawable æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œåªè¦ç†è§£äº†å®ƒè·Ÿ View çš„å…³ç³»ï¼Œå…¶å® Drawable çš„æƒ³è±¡åŠ›ä¼šéå¸¸å¤§ã€‚é€šè¿‡è‡ªå®šä¹‰ Drawableï¼Œå¯ä»¥åœ¨ Drawable ä¸­å®Œæˆå„ç§ç»˜åˆ¶é€»è¾‘ï¼Œè‡ªå®šä¹‰å®Œæˆåï¼Œåªéœ€è¦è®© View è°ƒç”¨ setBackground() æ–¹æ³•ï¼ŒæŠŠè‡ªå®šä¹‰çš„ Drawable ä¼ é€’è¿›å»ï¼Œè¿™æ ·å°±å¯ä»¥æ–¹ä¾¿æŠŠè‡ªå®šä¹‰ Drawable å’Œ View å…³è”åœ¨ä¸€èµ·ã€‚</p>

<p>ä¹‹å‰å†™è¿‡ä¸€ä¸ªè½¬èŠèŠ±çš„ Loading æ•ˆæœï¼Œå°±æ˜¯ç”¨è‡ªå®šä¹‰ Drawable å®ç°çš„ï¼Œç›®å‰å·²å¼€æºåœ¨ githubï¼Œæ„Ÿå…´è¶£çš„å»çœ‹çœ‹ã€‚</p>

<p><a href="https://github.com/maoruibin/FlowerLoading">FlowerLoading: Android loading or progress view, just like iOS IndicatorView.</a></p>
:ET
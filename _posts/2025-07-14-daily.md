---
layout: mypost
author: 咕咚
tags: daily
categories: blog
title: "服务器终于不在 503 了"
---

这段时间不知道怎么回事，我的 inBox 后台服务器总是时不时报 503 错误，在网页端是提示：

![图片](https://mmbiz.qpic.cn/mmbiz_png/FD5Nmg9rAYnOIO1UgUgMAhfvOZlRsEfhwOrKdPrawfCFibloFhibRK0ad3gtHxOfqhDSQrQNYhDZNA0Pyia98hGCQ/640?wx_fmt=png&from=appmsg)

在手机端，用户登录总是卡在登录页面，登录失败。

这两个问题，时好时坏，大部分人没有，只有少数人遇到，我后来也遇到过，但从自己看，代码完全没问题。

后来确定是云服务商的问题。这里可以简单说下我的服务器。

在 19 年开始做 App 时，因为要做用户购买机制，那就需要激活码验证，所以需要服务器，因为我自己没啥服务端编程经验，就选择了为前端开发者较为友好的 leancloud，开箱即用，它的优势就是让开发者不需要关心数据库设计、负载均衡等等各种服务端领域的技术，只需要像 Excel 那样建一个个可视化的表格，然后使用它们提供的 Api 去访问数据表，然后在把接口服务部署到他们提供的云引擎上，开发完成后，它们提供了 cli，一行命令就可以将自己的服务部署上去，作为开发者，完全不需要关心后面的逻辑，简单省事。

就这样，岁月静好，一眨眼用了已经 7、8 年了，但最近突然出来 503 问题，就很棘手，之前也出过问题，但都是我自己能触及的代码，这次的问题，在云引擎，所以开始我就找客服。

不找不知道，找个客服的联系方式好难，后来才知道在 2021 年时，leancloud 已经被一家游戏公司收购了，好在后来还是联系到了一个开发者哥们，然后我跟他不断的发邮件，通过邮件解决问题，后来他把问题转给了另一个开发者，就这样中间发了得有 20+ 的邮件，今天终于收到了问题解决的邮件，他们做了一些优化。

![图片](https://mmbiz.qpic.cn/mmbiz_png/FD5Nmg9rAYnOIO1UgUgMAhfvOZlRsEfh3OYXbWV6MeJhVSeqsfsUoey99xrrlK0AMPuTibbulsPDibolhQH5E2Dg/640?wx_fmt=png&from=appmsg)

经过我自己和用户确认，确实问题好了，🎉

不过事后，确实还是有一些反思：

服务器最重要的就是稳定性和安全性，这一点 leancloud 一直做的不错，这些年我的应用一直没有出过什么问题，我还是挺感谢 leancloud 的，我之前在好几个地方都推荐过 leancloud，但是一直依赖也不行，真到一些时候，需要依赖他们的人员去解决，就比较麻烦，后面还要去调研一下其他方案。

另外，inbox 笔记的网页端技术方案，其实有一些问题，之前把网页端免费开放了，这样经过让更多用户收益，但是网页端使用 webdav 时，对服务器的资源消耗还是比较多，我得继续考虑网页端是不是应该只对 PRO 开放。
